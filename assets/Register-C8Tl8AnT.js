import{d as J,r as p,p as n,i as u,b as m,e,w as a,z as K,A as Y,x as ee,O as le,B as ae,C as te,a4 as oe,a6 as se,n as x,a2 as ne,q as N,c as ue,v as B,y as re,Q as de,f as ie,m as o,E as z,H as pe,_ as me}from"./index-W1bgIC_N.js";/* empty css                  *//* empty css                     *//* empty css                    *//* empty css               *//* empty css                  *//* empty css                  *//* empty css               *//* empty css                 */import{n as ve}from"./user--Bkct1y1.js";/* empty css                   */import"./request-C-7Hg0qh.js";const ce={class:"register-page"},_e={class:"register-container"},fe={key:0,for:"email"},be={key:1,for:"email",class:"error"},Ve={key:2,for:"email"},ge=["src"],we={key:0,for:"tele"},ye={key:1,for:"tele",class:"error"},ke={key:2,for:"tele"},Ce={key:0},Ue={key:1,class:"error"},Ee={key:2},he={class:"button-group"},Ie=J({__name:"Register",setup(Re){const f=p(""),b=p(""),V=p(""),v=p(""),y=p(""),c=p(""),g=p(""),_=p(""),w=p(""),k=n(()=>v.value!=""),A=n(()=>c.value!=""),C=n(()=>g.value!=""),M=n(()=>V.value!=""),U=n(()=>_.value!=""),P=n(()=>f.value!=""),H=n(()=>b.value!=""),O=/^1\d{10}$/,E=n(()=>O.test(v.value)),h=n(()=>c.value==g.value),Z=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,I=n(()=>Z.test(_.value)),F=n(()=>!(P.value&&H.value&&M.value&&A.value&&C.value&&h.value&&(!U.value||I.value)&&(!k.value||E.value)));function T(r){const l=r.type.startsWith("image/"),d=r.size/1024/1024<2;return l||alert("只能上传图片文件！"),d||alert("上传头像图片大小不能超过 2MB!"),l&&d}function $(r){w.value=URL.createObjectURL(r.raw)}function j(){return new XMLHttpRequest}function D(){try{ve({role:V.value,name:b.value,telephone:v.value,password:c.value,location:y.value,username:f.value,email:_.value,avatar:""}).then(r=>{r.data.code==="200"?(z({message:"注册成功！请登录账号",type:"success",center:!0}),pe.push({path:"/login"})):r.data.code==="400"&&z({message:r.data.msg,type:"error",center:!0})})}catch{z({message:"出现网络问题！",type:"error",center:!0})}}return(r,l)=>{const d=te,i=ae,s=le,L=se,Q=oe,R=ee,q=re,S=ne,W=ie("router-link"),X=Y,G=K;return o(),u("div",ce,[m("div",_e,[e(G,{class:"box-card"},{default:a(()=>[m("div",null,[l[16]||(l[16]=m("h1",null,"注册",-1)),e(X,null,{default:a(()=>[e(R,null,{default:a(()=>[e(s,{span:7},{default:a(()=>[e(i,{required:""},{default:a(()=>[l[8]||(l[8]=m("label",{for:"username"},"用户名",-1)),e(d,{id:"username",modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=t=>f.value=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:1}),e(s,{span:7},{default:a(()=>[e(i,{required:""},{default:a(()=>[l[9]||(l[9]=m("label",{for:"name"},"真实姓名",-1)),e(d,{id:"name",modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=t=>b.value=t),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:1}),e(s,{span:8},{default:a(()=>[e(i,{required:""},{default:a(()=>[l[10]||(l[10]=m("label",{for:"role"},"身份",-1)),e(Q,{id:"role",modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=t=>V.value=t),placeholder:"请选择身份",style:{width:"100%"}},{default:a(()=>[e(L,{value:"user",label:"用户"}),e(L,{value:"admin",label:"管理员"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(s,{span:15},{default:a(()=>[e(i,null,{default:a(()=>[U.value?I.value?(o(),u("label",Ve,"邮箱")):(o(),u("label",be,"邮箱不合法")):(o(),u("label",fe,"邮箱")),e(d,{id:"email",modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=t=>_.value=t),class:x({"error-input":U.value&&!I.value}),placeholder:"请输入邮箱"},null,8,["modelValue","class"])]),_:1})]),_:1}),e(s,{span:1}),e(s,{span:8},{default:a(()=>[e(i,{label:"头像上传"},{default:a(()=>[e(S,{class:"avatar-uploader",action:"#","show-file-list":!1,accept:"image/*","before-upload":T,"http-request":j,onChange:$},{default:a(()=>[w.value?(o(),u("img",{key:0,src:w.value,alt:"Avatar Preview",class:"avatar-preview"},null,8,ge)):N("",!0),w.value?N("",!0):(o(),ue(q,{key:1},{default:a(()=>l[11]||(l[11]=[B("选择头像")])),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(s,{span:8},{default:a(()=>[e(i,null,{default:a(()=>[k.value?E.value?(o(),u("label",ke,"手机号")):(o(),u("label",ye,"手机号不合法")):(o(),u("label",we,"手机号")),e(d,{id:"tele",modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=t=>v.value=t),class:x({"error-input":k.value&&!E.value}),placeholder:"请输入手机号"},null,8,["modelValue","class"])]),_:1})]),_:1}),e(s,{span:1}),e(s,{span:15},{default:a(()=>[e(i,null,{default:a(()=>[l[12]||(l[12]=m("label",{for:"location"},"地址",-1)),e(d,{id:"location",modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=t=>y.value=t),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{required:""},{default:a(()=>[l[13]||(l[13]=m("label",{for:"password"},"密码",-1)),e(d,{type:"password",id:"password",modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=t=>c.value=t),placeholder:"••••••••"},null,8,["modelValue"])]),_:1}),e(i,{required:""},{default:a(()=>[C.value?h.value?(o(),u("label",Ee,"确认密码")):(o(),u("label",Ue,"密码不一致")):(o(),u("label",Ce,"确认密码（必填）")),e(d,{type:"password",id:"confirm-password",modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=t=>g.value=t),class:x({"error-input":C.value&&!h.value}),placeholder:"••••••••"},null,8,["modelValue","class"])]),_:1}),m("span",he,[e(q,{onClick:de(D,["prevent"]),disabled:F.value,type:"primary"},{default:a(()=>l[14]||(l[14]=[B(" 创建账户 ")])),_:1},8,["disabled"]),e(W,{to:"/login"},{default:a(({navigate:t})=>[e(q,{onClick:t},{default:a(()=>l[15]||(l[15]=[B(" 去登录 ")])),_:2},1032,["onClick"])]),_:1})])]),_:1})])]),_:1})])])}}}),Fe=me(Ie,[["__scopeId","data-v-94d819c4"]]);export{Fe as default};
