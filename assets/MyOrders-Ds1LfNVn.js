import{d as T,r as i,p as E,o as F,i as H,b as r,e as a,w as l,a4 as A,a5 as G,z as L,E as I,a6 as U,K as $,L as q,c as P,a7 as K,v,k as g,a8 as R,u as x,q as j,y as J,a9 as Q,aa as W,g as X,ab as Z,H as ee,m as h,_ as te}from"./index-CcEL__uZ.js";/* empty css                   *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css                    */import{g as ae}from"./order-B2HcAE_S.js";import{t as oe}from"./index-DKFuHmXp.js";import"./request-BuipQ3Vl.js";const le={class:"page-bg"},re={class:"orders-container"},ne={class:"orders-header"},se={class:"filters"},de={class:"card-header"},ie={class:"amount"},ue={class:"pagination-container"},ce=T({__name:"MyOrders",setup(pe){const b=i([]),p=i(!1),u=i(""),s=i([]),_=i(1),m=i(8);function w(){p.value=!0,ae().then(e=>{e.data.code==="200"?b.value=e.data.data:I.error(e.data.msg)}).catch(e=>{console.error("获取订单失败",e),I.error("获取订单列表失败")}).finally(()=>{p.value=!1})}function N(e){switch(e){case"PENDING":return"warning";case"PAID":return"success";case"SHIPPED":return"info";default:return"info"}}function k(e){return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function V(e){ee.push({path:`/payment-detail/${e}`})}const D=E(()=>{let e=[...b.value];if(u.value&&(e=e.filter(t=>t.status===u.value)),s.value&&s.value.length===2){const t=new Date(s.value[0]),n=new Date(s.value[1]);n.setHours(23,59,59,999),e=e.filter(f=>{const c=new Date(f.time);return c>=t&&c<=n})}return e}),C=E(()=>{const e=(_.value-1)*m.value,t=e+m.value;return D.value.slice(e,t)});return F(w),(e,t)=>{const n=U,f=A,c=G,O=X,y=J,d=K,M=R,S=Q,Y=W,z=L,B=q;return h(),H("div",le,[r("div",re,[r("div",ne,[t[3]||(t[3]=r("h1",null,"我的订单",-1)),r("div",se,[a(f,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),placeholder:"订单状态",clearable:""},{default:l(()=>[a(n,{label:"全部",value:""}),a(n,{label:"待支付",value:"PENDING"}),a(n,{label:"已支付",value:"PAID"}),a(n,{label:"已发货",value:"SHIPPED"})]),_:1},8,["modelValue"]),a(c,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=o=>s.value=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])]),a(z,{shadow:"hover",class:"orders-card"},{header:l(()=>[r("div",de,[t[4]||(t[4]=r("span",null,"订单列表",-1)),a(y,{onClick:w,type:"primary",plain:"",circle:""},{default:l(()=>[a(O,null,{default:l(()=>[a(x(Z))]),_:1})]),_:1})])]),default:l(()=>[$((h(),P(S,{data:C.value,stripe:"",style:{width:"100%"},"empty-text":"暂无订单数据"},{default:l(()=>[a(d,{prop:"orderId",label:"订单号",width:"180"}),a(d,{prop:"time",label:"下单时间",width:"180",sortable:""},{default:l(o=>[v(g(k(o.row.time)),1)]),_:1}),a(d,{prop:"amount",label:"金额",width:"120",sortable:""},{default:l(o=>[r("span",ie,"¥"+g(o.row.amount.toFixed(2)),1)]),_:1}),a(d,{prop:"method",label:"支付方式",width:"120"}),a(d,{prop:"status",label:"订单状态",width:"150"},{default:l(o=>[a(M,{type:N(o.row.status),size:"large"},{default:l(()=>[v(g(x(oe)(o.row.status)),1)]),_:2},1032,["type"])]),_:1}),a(d,{align:"middle",width:"150",label:"操作"},{default:l(o=>[o.row.status==="PENDING"?(h(),P(y,{key:0,color:"#409EFF",onClick:_e=>V(o.row.orderId),type:"text"},{default:l(()=>t[5]||(t[5]=[v(" 去支付 ")])),_:2},1032,["onClick"])):j("",!0)]),_:1})]),_:1},8,["data"])),[[B,p.value]]),r("div",ue,[a(Y,{layout:"prev, pager, next",total:D.value.length,"page-size":m.value,"current-page":_.value,"onUpdate:currentPage":t[2]||(t[2]=o=>_.value=o)},null,8,["total","page-size","current-page"])])]),_:1})])])}}}),Ie=te(ce,[["__scopeId","data-v-b3b4df38"]]);export{Ie as default};
