import{d as z,r as u,p as V,i as y,b as d,e as l,w as a,z as A,A as T,B as $,C as J,a2 as Q,g as X,u as k,a3 as j,v as c,F as G,J as K,y as O,Q as W,f as Y,E as x,m as C,R as Z,H as ee,_ as le}from"./index-W1bgIC_N.js";/* empty css                  *//* empty css                     *//* empty css                    *//* empty css                 */import{e as te,u as ae}from"./product-C5mZKjkp.js";import{u as oe}from"./tool-C-2oWe-p.js";/* empty css                   */import"./request-C-7Hg0qh.js";const ne={class:"create-page"},ue={class:"create-container"},de={class:"specifications-container"},se={class:"button-group"},re=z({__name:"CreateProducts",setup(ie){const i=u([]),w=()=>{i.value.push({item:"",value:""})},E=r=>{i.value.splice(r,1)},p=u(""),m=u(""),s=u(0),v=u(""),f=u([]),b=u(""),U=V(()=>p.value!==""),q=V(()=>m.value!==""),I=V(()=>s.value>=0&&s.value<=10),F=V(()=>!(U.value&&q.value&&I.value));function P(){const r={title:p.value,price:Number(m.value),rate:s.value,description:v.value,cover:b.value,specifications:i.value};te(r).then(e=>{if(e.data.code==="200"){const o={id:e.data.data.id,amount:1};ae(o),x({message:"创建商品成功！",type:"success",center:!0}),p.value="",m.value="",s.value=0,v.value="",b.value="",f.value.splice(0),i.value.splice(0),ee.push({path:"/all"})}else e.data.code==="400"&&x({message:e.data.msg,type:"error",center:!0})})}function B(r,e){f.value=e,new FormData().append("file",r.raw),oe().then(n=>{b.value=n.data.data.url})}function D(){x.warning("仅可上传 1 个文件")}function L(){return new XMLHttpRequest}return(r,e)=>{const o=J,n=$,M=X,N=Q,_=O,R=Y("router-link"),H=T,S=A;return C(),y("div",ne,[d("div",ue,[l(S,{class:"form-card"},{default:a(()=>[d("div",null,[e[10]||(e[10]=d("h1",null,"创建商品",-1)),l(H,{"label-position":"right","label-width":"100px",size:"large",class:"create-form"},{default:a(()=>[l(n,{label:"商品名称",required:""},{default:a(()=>[l(o,{id:"title",modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),required:"",placeholder:"请输入商品名"},null,8,["modelValue"])]),_:1}),l(n,{label:"商品价格",required:""},{default:a(()=>[l(o,{id:"price",modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),required:"",placeholder:"请输入商品价格",type:"number"},null,8,["modelValue"])]),_:1}),l(n,{label:"商品评分",required:""},{default:a(()=>[l(o,{id:"rate",modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),modelModifiers:{number:!0},required:"",placeholder:"请输入评分（0-10）",type:"number",step:"0.1",min:"0",max:"10"},null,8,["modelValue"])]),_:1}),l(n,{label:"商品描述"},{default:a(()=>[l(o,{id:"description",modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),placeholder:"商品描述",type:"textarea"},null,8,["modelValue"])]),_:1}),l(n,{label:"商品封面"},{default:a(()=>[l(N,{"file-list":f.value,"onUpdate:fileList":e[4]||(e[4]=t=>f.value=t),limit:1,"on-change":B,"on-exceed":D,class:"upload-demo","list-type":"picture","http-request":L,drag:""},{default:a(()=>[l(M,{class:"el-icon--upload"},{default:a(()=>[l(k(j))]),_:1}),e[6]||(e[6]=d("div",{class:"el-upload__text"},[c(" 将文件拖到此处或"),d("em",null,"单击此处"),c("上传。仅允许上传一份文件。 ")],-1))]),_:1},8,["file-list"])]),_:1}),l(n,{label:"商品规格"},{default:a(()=>[d("div",de,[(C(!0),y(G,null,K(i.value,(t,h)=>(C(),y("div",{key:h,class:"spec-item"},[l(o,{modelValue:t.item,"onUpdate:modelValue":g=>t.item=g,placeholder:"规格名称",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),l(o,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,placeholder:"规格值",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue","onUpdate:modelValue"]),l(_,{type:"danger",circle:"",icon:k(Z),onClick:g=>E(h)},null,8,["icon","onClick"])]))),128)),l(_,{type:"primary",onClick:w,style:{"margin-top":"10px"}},{default:a(()=>e[7]||(e[7]=[c(" 添加规格 ")])),_:1})])]),_:1}),d("span",se,[l(_,{onClick:e[5]||(e[5]=W(t=>P(),["prevent"])),disabled:F.value,type:"primary"},{default:a(()=>e[8]||(e[8]=[c(" 创建商品 ")])),_:1},8,["disabled"]),l(R,{to:"/all"},{default:a(({navigate:t})=>[l(_,{onClick:t},{default:a(()=>e[9]||(e[9]=[c(" 返回主页 ")])),_:2},1032,["onClick"])]),_:1})])]),_:1})])]),_:1})])])}}}),ye=le(re,[["__scopeId","data-v-01a6dffd"]]);export{ye as default};
