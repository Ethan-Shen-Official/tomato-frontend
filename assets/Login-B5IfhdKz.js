import{d as I,r as c,p as u,i as V,b as o,e as t,w as a,z as C,u as i,A as E,B as _,C as x,y as h,Q as B,v as f,f as U,m as L,E as p,H as N,_ as S}from"./index-CcEL__uZ.js";/* empty css                  *//* empty css                 */import{h as q,g as F}from"./user-CVe_ELYF.js";/* empty css                   */import"./request-BuipQ3Vl.js";const M={class:"login-page"},z={class:"login-container"},A={class:"button-group"},D=I({__name:"Login",setup(H){const s=c(""),l=c(""),v=u(()=>s.value!=""),g=u(()=>l.value!=""),b=u(()=>!(v.value&&g.value));function w(){q({username:s.value,password:l.value}).then(async n=>{if(n.data.code==="200"){p({message:"登录成功！",type:"success",center:!0});const e=n.data.data;sessionStorage.setItem("token",e),sessionStorage.setItem("username",s.value);const d=await F(s.value);sessionStorage.setItem("role",d.data.data.role),N.push({path:"/dashboard"})}else n.data.code==="400"&&(p({message:n.data.msg,type:"error",center:!0}),l.value="")}).catch(()=>{p({message:"登录失败，请稍后再试",type:"error",center:!0})})}return(n,e)=>{const d=x,m=h,k=U("router-link"),y=C;return L(),V("div",M,[o("div",z,[t(y,{class:"box-card"},{default:a(()=>[o("div",null,[e[6]||(e[6]=o("h1",null,"登录",-1)),t(i(E),null,{default:a(()=>[t(i(_),null,{default:a(()=>[e[2]||(e[2]=o("label",{for:"username"},"用户名",-1)),t(d,{id:"tele",type:"text",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),required:"",placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),t(i(_),null,{default:a(()=>[e[3]||(e[3]=o("label",{for:"password"},"账户密码",-1)),t(d,{id:"password",type:"password",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r),required:"",placeholder:"•••••••••••••"},null,8,["modelValue"])]),_:1}),o("span",A,[t(m,{onClick:B(w,["prevent"]),disabled:b.value,type:"primary"},{default:a(()=>e[4]||(e[4]=[f("登入")])),_:1},8,["disabled"]),t(k,{to:"/register"},{default:a(({navigate:r})=>[t(m,{onClick:r},{default:a(()=>e[5]||(e[5]=[f("去注册")])),_:2},1032,["onClick"])]),_:1})])]),_:1})])]),_:1})])])}}}),J=S(D,[["__scopeId","data-v-1d00da9d"]]);export{J as default};
