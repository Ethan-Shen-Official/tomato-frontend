import{d as v,r as m,o as C,E as f,c as _,w as o,a as b,b as a,e,f as h,g as z,u as n,t as E,h as y,s as p,n as B,i as g,j as S,k as H,l as F,m as r,_ as L,F as M}from"./index-W1bgIC_N.js";/* empty css                   */import{g as N}from"./user--Bkct1y1.js";import{i as T}from"./index-DKFuHmXp.js";import{g as V}from"./cart-D0JSwHAf.js";import"./request-C-7Hg0qh.js";const j={class:"header-container"},D={class:"header-left"},U={class:"header-right"},$={class:"icon-container"},q={class:"icon-container"},A=["src"],G={class:"icon-text"},J={class:"icon-container"},K=v({__name:"Header",setup(k){const c=m(""),u=sessionStorage.getItem("username"),l=m(0),x=()=>{sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),sessionStorage.removeItem("role"),window.location.reload()};return C(()=>{T()&&(V().then(t=>{t.data.code==="200"?l.value=t.data.data.total:f.error(t.data.msg)}).catch(t=>{console.error("获取购物车商品数量失败",t)}),N(u||"").then(t=>{t.data.code==="200"?c.value=t.data.data.avatar:f.error("获取用户信息失败")}).catch(t=>{console.error("获取用户信息失败",t)}))}),(t,s)=>{const d=h("router-link"),i=z,I=y,w=b;return r(),_(w,{class:"custom-header",height:"60"},{default:o(()=>[a("div",j,[a("div",D,[e(d,{to:"/home",class:"no-link"},{default:o(()=>s[0]||(s[0]=[a("h1",{class:"header-text"},"TomaTo书城",-1)])),_:1})]),a("div",U,[e(d,{to:"/order",class:"header-icon-link"},{default:o(()=>[a("div",$,[e(i,{size:24,color:"#333333"},{default:o(()=>[e(n(E))]),_:1})]),s[1]||(s[1]=a("span",{class:"icon-text"},"订单",-1))]),_:1}),e(d,{to:"/cart",class:"header-icon-link"},{default:o(()=>[a("div",q,[l.value>0?(r(),_(I,{key:0,value:l.value,max:99,class:"cart-badge"},{default:o(()=>[e(i,{size:24,color:"#333333"},{default:o(()=>[e(n(p))]),_:1})]),_:1},8,["value"])):(r(),_(i,{key:1,size:24,color:"#333333"},{default:o(()=>[e(n(p))]),_:1}))]),s[2]||(s[2]=a("span",{class:"icon-text"},"购物车",-1))]),_:1}),e(d,{to:"/dashboard",class:"header-icon-link"},{default:o(()=>[a("div",{class:B(["icon-container",{"avatar-container":c.value}])},[c.value?(r(),g("img",{key:0,src:c.value,alt:"用户头像",class:"user-avatar"},null,8,A)):(r(),_(i,{key:1,size:24,color:"#333333"},{default:o(()=>[e(n(S))]),_:1}))],2),a("span",G,H(n(u)),1)]),_:1}),a("div",{class:"header-icon-link",onClick:x},[a("div",J,[e(i,{size:24,color:"#333333"},{default:o(()=>[e(n(F))]),_:1})]),s[3]||(s[3]=a("span",{class:"icon-text"},"退出",-1))])])])]),_:1})}}}),O=L(K,[["__scopeId","data-v-393ff8b0"]]),Z=v({__name:"Home",setup(k){return(c,u)=>{const l=h("router-view");return r(),g(M,null,[e(O),e(l)],64)}}});export{Z as default};
