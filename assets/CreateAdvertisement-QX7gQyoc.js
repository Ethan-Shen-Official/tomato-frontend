import{d as D,r as _,V as q,p as B,i as k,b as n,e as t,w as a,z as A,A as F,B as H,C as L,a2 as M,g as N,u as R,a3 as z,v as i,y as j,Q,H as f,E as p,m as S,_ as T}from"./index-CcEL__uZ.js";/* empty css                  *//* empty css                     *//* empty css                    *//* empty css                 */import{n as X}from"./advertisement-DEPwoR5p.js";import{u as G}from"./tool-C-2oWe-p.js";import"./request-BuipQ3Vl.js";const J={class:"create-page"},K={class:"create-container"},O={class:"button-group"},P=D({__name:"CreateAdvertisement",setup(W){var m;const v=q(),l=_({title:"",content:"",imgUrl:"https://example.com/ad2.jpg",productId:((m=v.query.productId)==null?void 0:m.toString())||""}),d=_([]),g=B(()=>!(l.value.title.trim()&&l.value.productId.trim()&&l.value.imgUrl)),b=()=>{f.go(-1)},I=async()=>{try{const o=await X(l.value);o.data.code==="200"?(p.success("广告创建成功！"),x(),f.push({path:"/all"})):p.error(o.data.msg||"创建广告失败")}catch{p.error("请求失败，请检查网络连接")}},V=o=>{d.value=[o],new FormData().append("file",o.raw),G().then(r=>{l.value.imgUrl=r.data.result})},x=()=>{l.value={title:"",content:"",imgUrl:"",productId:""},d.value=[]},w=()=>{p.warning("仅可上传 1 个文件")},E=()=>new XMLHttpRequest;return(o,e)=>{const r=L,u=H,C=N,y=M,c=j,U=F,h=A;return S(),k("div",J,[n("div",K,[t(h,{class:"form-card"},{default:a(()=>[n("div",null,[e[7]||(e[7]=n("h1",null,"创建广告",-1)),t(U,{"label-position":"right","label-width":"100px",size:"large",class:"create-form"},{default:a(()=>[t(u,{label:"广告标题"},{default:a(()=>[t(r,{id:"title",modelValue:l.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.title=s),required:"",placeholder:"请输入广告标题"},null,8,["modelValue"])]),_:1}),t(u,{label:"广告内容"},{default:a(()=>[t(r,{id:"content",modelValue:l.value.content,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.content=s),placeholder:"请输入广告内容",type:"textarea",rows:4},null,8,["modelValue"])]),_:1}),t(u,{label:"关联产品ID"},{default:a(()=>[t(r,{id:"productId",modelValue:l.value.productId,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.productId=s),required:"",placeholder:"请输入关联产品ID",type:"text",disabled:""},null,8,["modelValue"])]),_:1}),t(u,{label:"广告图片"},{default:a(()=>[t(y,{"file-list":d.value,"onUpdate:fileList":e[3]||(e[3]=s=>d.value=s),limit:1,"on-change":V,"on-exceed":w,class:"upload-demo","list-type":"picture","http-request":E,drag:""},{default:a(()=>[t(C,{class:"el-icon--upload"},{default:a(()=>[t(R(z))]),_:1}),e[4]||(e[4]=n("div",{class:"el-upload__text"},[i(" 将图片拖到此处或"),n("em",null,"单击此处"),i("上传。仅允许上传一份文件。 ")],-1))]),_:1},8,["file-list"])]),_:1}),n("span",O,[t(c,{onClick:Q(I,["prevent"]),disabled:g.value,type:"primary"},{default:a(()=>e[5]||(e[5]=[i(" 创建广告 ")])),_:1},8,["disabled"]),t(c,{onClick:b},{default:a(()=>e[6]||(e[6]=[i("返回")])),_:1})])]),_:1})])]),_:1})])])}}}),se=T(P,[["__scopeId","data-v-ab966050"]]);export{se as default};
