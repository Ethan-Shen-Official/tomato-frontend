import{d as $,r as g,o as x,p as q,E as i,i as l,b as t,e as o,c as n,q as _,w as a,z as H,I as J,F as P,J as b,K,y as O,v as Q,L as j,x as G,f as W,m as c,M as X,N as Y,k as u,O as Z,P as ee,Q as te,g as se,u as A,R as oe,S as ae,T as re,U as ce,H as I,_ as le}from"./index-W1bgIC_N.js";/* empty css                   *//* empty css                 *//* empty css               *//* empty css               *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                        */import{g as ne,d as ie}from"./product-C5mZKjkp.js";import{g as de}from"./advertisement-Cvpmszqe.js";/* empty css                   */import"./request-C-7Hg0qh.js";const _e={class:"products-page"},ue={class:"products-container"},me={class:"ad-section"},pe={class:"ad-content"},fe={class:"ad-overlay"},ve={class:"ad-title"},he={class:"ad-description"},ge={class:"products-list"},ye={class:"product-wrapper"},ke={key:0,class:"delete-wrapper"},we={class:"product-content"},Ee={class:"product-image"},Ce={key:1,class:"image-placeholder"},xe={class:"product-info"},Pe={class:"product-title"},be={class:"price-rate"},Ae={class:"price-show"},Ie={class:"product-price"},Ve=$({__name:"AllProducts",setup(Be){const m=g([]),V=async()=>{try{const s=await de();s.data.code==="200"&&(m.value=s.data.data)}catch{i.error("获取广告数据失败")}},B=(s,r)=>{sessionStorage.getItem("role")==="admin"?I.push({name:"UpdateAdvertisement",params:{id:r}}):I.push({name:"ProductDetail",params:{id:s}})};x(async()=>{await Promise.all([f(),V()])});const y=q(()=>sessionStorage.getItem("role")||""),F=async s=>{try{const r=await ie(s);r.data.code==="200"?(i.success("删除成功"),await f()):i.error(r.data.msg||"删除失败")}catch{i.error("删除操作失败")}},p=g([]),d=g(!0),N=s=>s?Number(s).toFixed(2):"0.00",f=async()=>{try{d.value=!0;const s=await ne();s.data.code==="200"&&(p.value=s.data.data)}catch{i.error("获取商品列表失败")}finally{d.value=!1}};return x(()=>{f()}),(s,r)=>{const v=Y,D=X,S=J,k=O,w=W("router-link"),E=se,U=ee,z=re,C=H,M=Z,L=G,R=ce,T=j;return c(),l("div",_e,[t("div",ue,[t("div",me,[m.value.length>0?(c(),n(S,{key:0,interval:5e3,type:"card",height:"300px",class:"ad-carousel"},{default:a(()=>[(c(!0),l(P,null,b(m.value,e=>(c(),n(D,{key:e.id,class:"ad-item",onClick:h=>B(e.productId,e.id)},{default:a(()=>[t("div",pe,[o(v,{src:e.imgUrl,fit:"cover",class:"ad-image"},null,8,["src"]),t("div",fe,[t("h3",ve,u(e.title),1),t("p",he,u(e.content),1)])])]),_:2},1032,["onClick"]))),128))]),_:1})):_("",!0)]),o(C,{class:"list-card"},{default:a(()=>[t("div",null,[y.value==="admin"?(c(),n(w,{key:0,to:"/create"},{default:a(()=>[o(k,{type:"primary",size:"default",class:"create-button"},{default:a(()=>r[1]||(r[1]=[Q(" 创建商品 ")])),_:1})]),_:1})):_("",!0),r[2]||(r[2]=t("h1",{style:{"margin-bottom":"30px"}},"全部商品",-1)),K((c(),l("div",ge,[o(L,{gutter:20},{default:a(()=>[(c(!0),l(P,null,b(p.value,e=>(c(),n(M,{key:e.id,xs:24,sm:12,md:8,lg:6,class:"product-col"},{default:a(()=>[t("div",ye,[y.value==="admin"?(c(),l("div",ke,[o(U,{title:"确认要删除该商品吗？",onConfirm:h=>F(String(e.id))},{reference:a(()=>[o(k,{type:"danger",size:"small",circle:"",class:"delete-btn",onClick:r[0]||(r[0]=te(()=>{},["stop"]))},{default:a(()=>[o(E,null,{default:a(()=>[o(A(oe))]),_:1})]),_:1})]),_:2},1032,["onConfirm"])])):_("",!0),o(w,{to:{name:"ProductDetail",params:{id:e.id}},style:{"text-decoration":"none",color:"inherit"}},{default:a(()=>[o(C,{class:"product-card",shadow:"hover"},{default:a(()=>[t("div",we,[t("div",Ee,[e.cover?(c(),n(v,{key:0,src:e.cover,fit:"cover",class:"cover-image"},null,8,["src"])):(c(),l("div",Ce,[o(E,{size:50},{default:a(()=>[o(A(ae))]),_:1})]))]),t("div",xe,[t("h3",Pe,u(e.title),1),t("div",be,[o(z,{modelValue:e.rate,"onUpdate:modelValue":h=>e.rate=h,disabled:"",max:10,colors:["#99A9BF","#F7BA2A","#FF9900"],class:"product-rate"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",Ae,[t("span",Ie,"¥"+u(N(e.price)),1)])])])]),_:2},1024)]),_:2},1032,["to"])])]),_:2},1024))),128))]),_:1}),!d.value&&p.value.length===0?(c(),n(R,{key:0,description:"暂无商品数据",class:"empty-tip"})):_("",!0)])),[[T,d.value]])])]),_:1})])])}}}),Je=le(Ve,[["__scopeId","data-v-8c261cb6"]]);export{Je as default};
